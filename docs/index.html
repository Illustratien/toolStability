<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tool for Stability Indices calculation • toolStability</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tool for Stability Indices calculation">
<meta property="og:description" content='Tools to calculate stability indices with parametric,
 non-parametric and probabilistic approaches. The basic data format requirement for toolStability is a data frame with 3 columns including numeric trait values, genotype,and environmental labels. Output format of each function is the dataframe with chosen stability index for each genotype. Function "table_stability" offers the summary table of all stability indices in this package.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">toolStability</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/toolStability.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="toolstability" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#toolstability" class="anchor"></a>toolStability</h1></div>
<p>This is an r package for calculating parametric, non-parametric, and probabilistic stability indices.</p>
<p>##package structure overview</p>
<p>toolStability contains different functions to calculate stability indices, including:</p>
<ol>
<li>adjusted coefficient of variation</li>
<li>coefficient of determination</li>
<li>coefficient of regression</li>
<li>deviation mean squares</li>
<li>ecovalence</li>
<li>environmental variance</li>
<li>genotypic stability</li>
<li>genotypic superiority measure</li>
<li>safety first index</li>
<li>stability variance</li>
<li>variance of rank</li>
</ol>
<p>##function input tutorial</p>
<ol>
<li>Data preparation</li>
</ol>
<p>In order to calculate stability index, you will need to prepare a data frame with 3 columns containing trait, genotype, and environment.</p>
<ul>
<li>trait: numeric and continuous, trait value to be analyzed.</li>
<li>genotype: character or factor, labeling different genotypic varieties.</li>
<li>environment: character or factor, labeling different environments.</li>
</ul>
<ol>
<li>Input formats of function</li>
</ol>
<p>Most of the functions in the package work with the following format:</p>
<p>function (data = Data, trait = “Trait_Column_Name”, genotype = “Genotype_Column_Name”, environment = “Environment_Column_Name”)</p>
<p>For calculation of probabilistic stability index “safety_first_index”, an additional parameter “lambda” is required.</p>
<ul>
<li>lambda: minimal acceptable value of trait that the user expected from crop across environments. Lambda should between the ranges of trait value. Under the assumption of trait is normally distributed, safety first index is calculated based on the probability of trait below lambda across the environments for each genotype.</li>
</ul>
<ol>
<li>Function Features</li>
</ol>
<p>Function “table_stability” generates the summary table containing all the stability indices in the package for every genotype, also including the mean yield and normality check results for the trait of each genotype across all the environments.</p>
<p>User can specify the interested combination of environments by entering a vector with column names of environmental factors. See examples for more details.</p>
<ol>
<li>Equations for stability indices</li>
</ol>
<p>The equation of each stability index can be found in vignette of the toolStability package.</p>
<p>vignette(“Vignette”, package = “toolStability”)</p>
<div id="dataset-description" class="section level2">
<h2 class="hasAnchor">
<a href="#dataset-description" class="anchor"></a>dataset description</h2>
<p>The default data set ‘Data’ is the subset of APSIM simulated wheat dataset, which includes 5 genotypes in 4 locations for 4 years, with 2 nitrogen application rates, 2 sowing dates, and 2 CO2 levels of treatments (Casadebaig et al., 2016).</p>
<p>‘Data’ in this package is A data frame with 640 observations and 8 variables.</p>
<p>Trait Wheat yield (kg.ha-1). Genotype 5 varieties. Environment 128 unique combination of environments for each genotype. Year 4 years. Sites 4 locations. Nitrogen 2 nitrogen application levels. CO2 2 CO2 concentration levels. Sowing 2 sowing dates.</p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">toolStability</span><span class="op">)</span>
<span class="co">### load data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"Data"</span><span class="op">)</span>
<span class="co">### check the structure of sample dataset</span>
<span class="co">### be sure that the trait is numeric!!!</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">Data</span><span class="op">)</span>
<span class="co">#&gt; Rows: 640</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; $ Genotype    &lt;fct&gt; 1864, 1864, 1864, 1864, 1864, 1864, 1864, 1864, 18...</span>
<span class="co">#&gt; $ Yield       &lt;dbl&gt; 1278.6, 1746.0, 1753.9, 1851.8, 2176.6, 2783.3, 31...</span>
<span class="co">#&gt; $ Environment &lt;fct&gt; 1959 Emerald low control early, 1960 Emerald low c...</span>
<span class="co">#&gt; $ Years       &lt;int&gt; 1959, 1960, 1961, 1962, 1959, 1960, 1961, 1962, 19...</span>
<span class="co">#&gt; $ Sites       &lt;fct&gt; Emerald, Emerald, Emerald, Emerald, Yanco, Yanco, ...</span>
<span class="co">#&gt; $ Nitrogen    &lt;fct&gt; low, low, low, low, low, low, low, low, low, low, ...</span>
<span class="co">#&gt; $ CO2         &lt;fct&gt; control, control, control, control, control, contr...</span>
<span class="co">#&gt; $ Sowing      &lt;fct&gt; early, early, early, early, early, early, early, e...</span>

<span class="co">### calculate ecovalence for all genotypes</span>
<span class="va">single.index.ecovalence</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ecovalence.html">ecovalence</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Data</span>,
                               trait <span class="op">=</span> <span class="st">'Yield'</span>,
                               genotype <span class="op">=</span> <span class="st">'Genotype'</span>,
                               environment <span class="op">=</span> <span class="st">'Environment'</span><span class="op">)</span>
<span class="co">### check the structure of result</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">single.index.ecovalence</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5</span>
<span class="co">#&gt; Columns: 3</span>
<span class="co">#&gt; $ Genotype   &lt;fct&gt; 1864, 2757, 2844, 3356, 4885</span>
<span class="co">#&gt; $ Mean.Yield &lt;dbl&gt; 2878.070, 1913.365, 2911.395, 3038.426, 2024.919</span>
<span class="co">#&gt; $ ecovalence &lt;dbl&gt; 139083.63, 216553.91, 73165.94, 99206.67, 188543.72</span>

<span class="co">### calculate all stability indices for all genotypes</span>
<span class="va">summary.table</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/table_stability.html">table_stability</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Data</span>,
                                 trait <span class="op">=</span> <span class="st">'Yield'</span>,
                                 genotype <span class="op">=</span> <span class="st">'Genotype'</span>,
                                 environment <span class="op">=</span> <span class="st">'Environment'</span>,
                                 lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">Yield</span><span class="op">)</span>,
                                 normalize <span class="op">=</span> <span class="cn">F</span>,
                                 unit.correct <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; Warning in table_stability(data = Data, trait = "Yield", genotype = "Genotype", : All of your genotypes didn't pass the Shapiro normality test!</span>
<span class="co">#&gt;  Safety_first Index may not be accurate.</span>
<span class="co">#### warning message is telling you that your data structure is not distributed as normal distribution</span>

<span class="co">#### check the structure of result</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">summary.table</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5</span>
<span class="co">#&gt; Columns: 14</span>
<span class="co">#&gt; $ Genotype                          &lt;fct&gt; 1864, 2757, 2844, 3356, 4885</span>
<span class="co">#&gt; $ Mean.Yield                        &lt;dbl&gt; 2878.070, 1913.365, 2911.395...</span>
<span class="co">#&gt; $ Normality                         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, ...</span>
<span class="co">#&gt; $ Safety.first.index                &lt;dbl&gt; 0.3523378, 0.6665326, 0.3242...</span>
<span class="co">#&gt; $ Coefficient.of.determination      &lt;dbl&gt; 0.9398731, 0.8270000, 0.9485...</span>
<span class="co">#&gt; $ Coefficient.of.regression         &lt;dbl&gt; 1.1596475, 0.8552736, 1.0316...</span>
<span class="co">#&gt; $ Deviation.mean.squares            &lt;dbl&gt; 108789.28, 193280.79, 73052....</span>
<span class="co">#&gt; $ Environmental.variance            &lt;dbl&gt; 1809327, 1117230, 1418923, 1...</span>
<span class="co">#&gt; $ Genotypic.stability               &lt;dbl&gt; 29248135, 24360429, 14583562...</span>
<span class="co">#&gt; $ Genotypic.superiority.measure     &lt;dbl&gt; 89307.69, 1004043.78, 70091....</span>
<span class="co">#&gt; $ Variance.of.rank                  &lt;dbl&gt; 1.770116, 2.281250, 1.561946...</span>
<span class="co">#&gt; $ Stability.variance                &lt;dbl&gt; 173448.30, 303582.09, 62720....</span>
<span class="co">#&gt; $ Adjusted.coefficient.of.variation &lt;dbl&gt; 50.31578, 47.87130, 44.31829...</span>
<span class="co">#&gt; $ Ecovalence                        &lt;dbl&gt; 139083.63, 216553.91, 73165....</span>

<span class="co">### calculate all stability indices for all genotypes</span>
<span class="va">normalized.summary.table</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/table_stability.html">table_stability</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Data</span>,
                                 trait <span class="op">=</span> <span class="st">'Yield'</span>,
                                 genotype <span class="op">=</span> <span class="st">'Genotype'</span>,
                                 environment <span class="op">=</span> <span class="st">'Environment'</span>,
                                 lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">Yield</span><span class="op">)</span>,
                                 normalize <span class="op">=</span> <span class="cn">T</span>,
                                 unit.correct <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; Warning in table_stability(data = Data, trait = "Yield", genotype = "Genotype", : All of your genotypes didn't pass the Shapiro normality test!</span>
<span class="co">#&gt;  Safety_first Index may not be accurate.</span>
<span class="co">#### warning message is telling you that your data structure is not distributed as normal distribution</span>

<span class="co">#### check the structure of result</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">normalized.summary.table</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5</span>
<span class="co">#&gt; Columns: 14</span>
<span class="co">#&gt; $ Genotype                          &lt;fct&gt; 1864, 2757, 2844, 3356, 4885</span>
<span class="co">#&gt; $ Mean.Yield                        &lt;dbl&gt; 2878.070, 1913.365, 2911.395...</span>
<span class="co">#&gt; $ Normality                         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, ...</span>
<span class="co">#&gt; $ Safety.first.index                &lt;dbl&gt; 0.85683453, 0.00000000, 0.93...</span>
<span class="co">#&gt; $ Coefficient.of.determination      &lt;dbl&gt; 0.07112157, 1.00000000, 0.00...</span>
<span class="co">#&gt; $ Coefficient.of.regression         &lt;dbl&gt; 0.0000000, 0.9787025, 0.4116...</span>
<span class="co">#&gt; $ Deviation.mean.squares            &lt;dbl&gt; 0.7027599, 0.0000000, 1.0000...</span>
<span class="co">#&gt; $ Environmental.variance            &lt;dbl&gt; 0.0000000, 0.9389617, 0.5296...</span>
<span class="co">#&gt; $ Genotypic.stability               &lt;dbl&gt; 0.0000000, 0.3333003, 1.0000...</span>
<span class="co">#&gt; $ Genotypic.superiority.measure     &lt;dbl&gt; 0.9395799, 0.0000000, 0.9593...</span>
<span class="co">#&gt; $ Variance.of.rank                  &lt;dbl&gt; 0.8095988, 0.3420919, 1.0000...</span>
<span class="co">#&gt; $ Stability.variance                &lt;dbl&gt; 0.5402844, 0.0000000, 1.0000...</span>
<span class="co">#&gt; $ Adjusted.coefficient.of.variation &lt;dbl&gt; 0.0000000, 0.4075840, 1.0000...</span>
<span class="co">#&gt; $ Ecovalence                        &lt;dbl&gt; 0.5402844, 0.0000000, 1.0000...</span>

<span class="co">### compare the result from summary.table and normalized.summary.table</span>


<span class="co">### calculate the stability indices only based only on CO2 and Nitrogen environments</span>
<span class="va">summary.table2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/table_stability.html">table_stability</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Data</span>,
                                 trait <span class="op">=</span> <span class="st">'Yield'</span>,
                                 genotype <span class="op">=</span> <span class="st">'Genotype'</span>,
                                 environment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'CO2'</span>,<span class="st">'Nitrogen'</span><span class="op">)</span>,
                                 lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">Data</span><span class="op">$</span><span class="va">Yield</span><span class="op">)</span>,
                                 normalize <span class="op">=</span> <span class="cn">F</span>,
                                 unit.correct <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; Warning in table_stability(data = Data, trait = "Yield", genotype = "Genotype", : All of your genotypes didn't pass the Shapiro normality test!</span>
<span class="co">#&gt;  Safety_first Index may not be accurate.</span>

<span class="co">#### check the structure of result</span>
<span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">summary.table2</span><span class="op">)</span>
<span class="co">#&gt; Rows: 5</span>
<span class="co">#&gt; Columns: 14</span>
<span class="co">#&gt; $ Genotype                          &lt;fct&gt; 1864, 2757, 2844, 3356, 4885</span>
<span class="co">#&gt; $ Mean.Yield                        &lt;dbl&gt; 2878.070, 1913.365, 2911.395...</span>
<span class="co">#&gt; $ Normality                         &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, ...</span>
<span class="co">#&gt; $ Safety.first.index                &lt;dbl&gt; 0.3523378, 0.6665326, 0.3242...</span>
<span class="co">#&gt; $ Coefficient.of.determination      &lt;dbl&gt; 0.161086973, 0.138169855, 0....</span>
<span class="co">#&gt; $ Coefficient.of.regression         &lt;dbl&gt; 1.1791003, 0.8614393, 1.3780...</span>
<span class="co">#&gt; $ Deviation.mean.squares            &lt;dbl&gt; 1517867.6, 962862.6, 1012476...</span>
<span class="co">#&gt; $ Environmental.variance            &lt;dbl&gt; 1809327, 1117230, 1418923, 1...</span>
<span class="co">#&gt; $ Genotypic.stability               &lt;dbl&gt; 213741097, 130745446, 161091...</span>
<span class="co">#&gt; $ Genotypic.superiority.measure     &lt;dbl&gt; 3688981, 6251668, 3333615, 3...</span>
<span class="co">#&gt; $ Variance.of.rank                  &lt;dbl&gt; 2644.454, 1623.286, 2007.764...</span>
<span class="co">#&gt; $ Stability.variance                &lt;dbl&gt; 2025117, 1102709, 1229740, 1...</span>
<span class="co">#&gt; $ Adjusted.coefficient.of.variation &lt;dbl&gt; 50.31578, 47.87130, 44.31829...</span>
<span class="co">#&gt; $ Ecovalence                        &lt;dbl&gt; 1501096.6, 951975.1, 1027598...</span>

<span class="co">### compare the result from summary.table and summary.table2</span>
<span class="co">### see how the choice of environments affect the data</span></code></pre></div>
</div>
<div id="enjoy" class="section level2">
<h2 class="hasAnchor">
<a href="#enjoy" class="anchor"></a>Enjoy</h2>
<p>Hope you enjoy using this package when calculating the stability indices.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Tien-Cheng Wang <br><small class="roles"> Author, maintainer </small>  </li>
<li>Tsu-Wei Chen <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Tien-Cheng Wang, Tsu-Wei Chen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
